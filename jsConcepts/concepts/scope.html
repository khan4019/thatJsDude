<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="that js dude" content="">    
    <title>JS: scope &amp; closure</title>

    <link rel="shortcut icon" href="../../images/favicon.jpg">    
    <link rel="stylesheet" href="../../css/bootstrap.min.css" >
    <link rel="stylesheet" href="../../css/zenburn.css">
    <!-- Custom styles for this template -->
    <style>
      /* Move down content because we have a fixed navbar that is 50px tall */
      body {        
        padding-bottom: 20px;
      }
      .purpleBold{
        color:purple;        
        font-weight: bold;
      }
      .gray{
        color: gray;
      }
      .blueish{
        color: rgba(151, 182, 209, 0.98);
      }
      .singInStuff{
        margin-top: 9px;
      }
      #uName{
        margin-top: -7px;
      }
      .skipListItem{
        list-style-type: none;
      }
      .skipListItem a{
        color: inherit;
      }
      a:visited
      { 
        color: rgba(218, 209, 149, 0.98);
      }
      .imageContainer{
        overflow: hidden;
        margin: 1% 0 1% 0;
      }
      .imageHolder{
        float: left;
        padding: 1%;
        margin: 0 1%;
        border: 10px solid #f5f5f5;
        border-radius: 8px;
      }
      .imageHolder img{
        max-height: 180px;
        height: 180px;
        width: 280px;
        float: left;        
      }
      .imgTitleHolder{
        margin: 0 0 0 8%;
      }
      .imageHolder .imageTitle{
        font-weight: bold;
        font-size: 1.2em;
      }

      /*style for demo*/
      
    </style>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
 
  <body>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>JS: Scope &amp; Closure</h1>                
        <h3>Understanding JavaScript scope, hoisting, closure with performance secret.</h3>
        <small>May 18, 2014</small>        
        <div id="fb-root"></div><div class="fb-like" data-href="http://www.thatjsdude.com/interview/js1.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div> &nbsp;<div class="g-plusone"></div>
      </div>
    </div>
    <div class="container">
      <!-- Example row of columns -->

      <div class="row center">        
        <iframe width="853" height="480" src="//www.youtube.com/embed/Rx_JFOSxgpY" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="row center">
        <ol>          
          <li><a href="#globlaScope">Global Scope</a></li>
          <li><a href="#localScope">Local Scope</a></li>
          <li><a href="#multipleScope">Multiple Scope</a></li>
          <li><a href="#accessGlobal">Access Variable</a></li>
          <li><a href="#avoidGlobal">Access Global Variable</a></li>
          <li><a href="#hoisting">Hoisting</a></li>
          <li><a href="#closure">Closure</a></li>
          <li><a href="#summary">Don't have time! Read Summary and get lost</a></li>
        </ol>
      </div>
       <div id="globlaScope">
           <h2>1. Global Scope</h2>
           <p><strong>Global::</strong> When someone says global, what comes to your mind? You may visualize a globe you remember seeing in high school. For those who never went to a high school, have a look at Image -1.</p>
           <p><strong>Global Star::</strong> Look at image -2. If you cant see a person in the top right corner, borrow a magnifying glass from your grandma - it's Jackie Chan, the celebrity. He is a global star. People will recognize him from any part of the world. Similarly, you can easily recognize a global star like Nelson Mandela, Princess Diana, etc. </p>
           <p><strong>Global Variable::</strong> Global variable is exactly like global star. You can access it (get or set the value of it), from any part of your application.</p>

           <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/globe.png" alt="">             
               <p class="imgTitleHolder"><span>Image-1: </span><span class="imageTitle">The Globe</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/globeJackie.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-2: </span><span class="imageTitle">The Global Star</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/jackie.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-3: </span><span class="imageTitle">Mr. Jackie Chan</span></p>
             </div>
           </div>
          <br>          
          <p><strong>Global Events::</strong> If you are not a genius like me, you can easily recognize global events like "New Year's Day", "Christmas", "The Olympics", etc. from any part of the world. Have a look at Image -5.</p>
          <p><strong>Global Functions::</strong> Similarly, global functions could be accessible from any part of your application.</p>
          <p><strong>Global Scope::</strong> Anything in the global scope could be accessible accross your application. Have a look into Image -6. You can have global variables like global stars and global functions like global events/activities.</p>

         <div class="imageContainer">
          <div class="imageHolder">
             <img src="../../images/scope/newYear.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-4: </span><span class="imageTitle">Happy New Year</span></p>
           </div>
           <div class="imageHolder">
             <img src="../../images/scope/globeStars.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-5: </span><span class="imageTitle">The Global Things</span></p>
           </div>
           <div class="imageHolder">
              <img src="../../images/scope/globalscope.png" alt="">              
             <p class="imgTitleHolder"><span>Image-6: </span><span class="imageTitle">The Global Scope</span></p>
           </div>           
         </div>
         <br>
         <p>In the code block below, "a" is a global variable and "b" is a global function. You can access global variable from anywhere of your application including inside of the function "b". Anything that is not inside of a function, is global.</p>
          <pre><code>
//global variable
var a = 2;

//global function
function b(){
   console.log(a);  //access global variable
}

b(); //execute global function.
          </code></pre>
         <br>
          <h4>Take away</h4>
          <p> Global variables are exactly like global stars. You can access them (get or set the value of it), from any part of your application. Global functions are the same as global events. You can execute (call) them from any part of your application.</p>          
          <p>Global variables and functions are executed in the global context. If you need to understand more about JavaScript context, read <a href="http://davidshariff.com/blog/what-is-the-execution-context-in-javascript/">Execution context and Stack in JavaScript</a> or watch <a href="https://www.youtube.com/watch?v=yuo8YqKDQ-M">Understanding JavaScript this in a crystal clear way</a></p>
       </div>
       <div id="localScope">
           <h2>2. Local Scope</h2>

           <p><strong>Local::</strong> When somebody says local, what comes to your mind? If you are smart like me, you will thik- not global. Envision about a part of the world. For example, the USA, it's a country, or a part of the world ( If you don't know where is the USA is located, I marked it for you in Image -7).</p>
           <p><strong>Local Star::</strong> Look at image -8. If you are in the USA, you may know this infamous celebrity ( she somehow manages to make the tabloids). But people outside of the USA will not recognize her. She is a local star, boudn to her territory.</p>
           <p><strong>Local Variable::</strong> Local variables are exactly like local stars. You can only access one (get or set the value of it)- in the local scope. In JavaScript local scope is defined by a function. If you declare a variable inside a function, you can only access it (get or set the value) inside of the function. If you try to access it from outside of the function, you will get a reference error.</p>

           <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/local.jpg" alt="">             
               <p class="imgTitleHolder"><span>Image-7: </span><span class="imageTitle">The Local</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/kd.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-8: </span><span class="imageTitle">Kim Kardashian</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/localStar.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-9: </span><span class="imageTitle">The Local Star</span></p>
             </div>
           </div>
          <br>
          <p><strong>Local Events::</strong> Consider American football (Image-10). Not the football (soccer) the rest of the world knows. It's crazily famous here in the USA, particularly the final events, the Super Bowl. But people outside of the world doesn't know much about  it, making the Super Bowl a Local Event. </p>
          <p><strong>Local Functions:: </strong>Similarly, any function inside another function is called a local function. You can only execute it inside the outer function. If you really want to get the inner function, you have to return the function by creating closure (stay tuned for closure information).</p>
          <p><strong>Local Scope::</strong> Anything in the local scope (inside a function) is only accessible from within. Have a look at Image-11.</p>
          <p><strong>Scope Chain::</strong> Local scope is connected to the global scope. In Image-12, see a dotted line/chain towards the global scope. This is how you have access to any global variables/functions. This link/chain is called the scope chain (stay tuned for more on the scope chain).</p>
         <div class="imageContainer">
           <div class="imageHolder">
             <img src="../../images/scope/football.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-10:</span><span class="imageTitle">Local Events</span></p>
           </div>
           <div class="imageHolder">
             <img src="../../images/scope/localEvents.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-11:</span><span class="imageTitle">Local Events</span></p>
           </div>
           <div class="imageHolder">
              <img src="../../images/scope/localScope.png" alt="">              
             <p class="imgTitleHolder"><span>Image-12:</span><span class="imageTitle">Local Scope</span></p>
           </div>           
         </div>

          <p>In the code block below, "d" is a local variable. You can access it (get or set the value) inside the function "b". If you try to access it outside of the function, you will get a reference error.</p>
          <pre><code>
var a = 2; 
function b(){
   var d = 21; //local variable
   console.log(d); //can access it inside the function
}
b();  // 21

console.log(d); //ReferenceError: d is not defined
          </code></pre>    
         <p><strong>Implicit Global::</strong> If you forget to put var before the variable of a function, it becomes a global variable. In the code block below, "a", "f" and "i" are global variables. However, you may not want "f" and "i" to be global. So, be careful. "f" becomes global variable as you put ";" after the value of "e", you might want to add a comma in this place.</p>
         <pre><code>
var a = 21;

function b(){
  var d = 7,
      e = 8;
      f = 9;

  for(i =0; i&lt;5; i++){
    console.log(e);  
  }  
}
         </code></pre>     
          <h4>Take away</h4>
          <p> Local variables are exactly like local-stars. You can only access them (get or set their values) inside their scope. Local functions are like local events. You can only execute (celebrate) inside the scope.</p>          
          <p>Local variables and functions are executed in the local context.</p>
       </div>
       <div id="multipleScope">
           <h2>3. Multiple Scope</h2>
           <p><strong>Multiple functions::</strong> If you have more than one functions and you execute them, each one of them will create their own scope. However, every execution scope will be linked to the global scope. Thats is how you  have access to the global scope variable and function from any part of your application. Have a look at Image -13.</p>
           <p><strong>Nested Scope::</strong> If you execute a function within a function, the inner function will create a scope inside the outer function. Look at the Image-14. Remember, the inner scope will have access to the outer function variable, while the outer one will have access to the global variable. Now take a minute to absorb  Image-14 and take another minute to sift through your confusion.</p>
           <p><strong>Closure::</strong> If you have a function inside a function, this is called closure. Closure is a powerful feature of JavaScript for encapsulation. Some of your function could be closure (Image-15). Don't worry about it for now, Soon you will have a crystal clear understanding of closure.</p>

           <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/multiScope.png" alt="">             
               <p class="imgTitleHolder"><span>Image-13: </span><span class="imageTitle">Multiple Scope</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/closure1.png" alt="">              
               <p class="imgTitleHolder"><span>Image-14: </span><span class="imageTitle">Nested Scope</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/closureScope.png" alt="">              
               <p class="imgTitleHolder"><span>Image-15: </span><span class="imageTitle">JavaScript Scope</span></p>
             </div>
           </div>
         <br>
         <p>In the code block, below function "b" and function "c" create separate scopes like you see in Image-13</p>
         <pre><code>
var a = 2;

function b(){ 
  console.log(a); 
}

function c(){ 
  console.log(a); 
}

b(); // scope created for executing function "b" 
c(); // scope created for executing function "c" 
         </code></pre>
         <br>
         <p>In the code block below, when executing of function "b", function "dog" will be executed and it will create a new scope within the scope of function "b". Refer to Image-14 </p>
         <pre><code>
var a = 2; 
function b(){ 
   var d = 21;
   function dog(){  console.log(a); }
   dog(); //closure is created
}

function c(){ console.log(a); }

b();            
c();
         </code></pre>
         <div id="blockScope">
          <h4>Block Scope</h4>
          <p>Block scope is a block/ part of a code surrounded by {}. JavaScript doesn't support block scope. Read more about block scope at <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Statements?redirectlocale=en-US&redirectslug=JavaScript%2FGuide%2FStatements#Block_Statement">MDN: block scope</a></p>
          <pre><code>
function getY(){
  var x = 5;
  if(x>0){
    var y = 7;  
  }
  return y;
}

getY(); //7
          </code></pre>
          <p>Congratulations to you! Because JavaScript does not support block scope, it is that much easy to understand. It is less complex and faster to parse. Hoisting also plays a role in this, but we will have to come back to that another time (sorry, too many promises).</p>
          <h4>ES6: let</h4>
         <p> JavaScript cannot use block scope but you can have a block scope variable when ES6 "let" is supported by major browsers. Read MDN documents to learn more about <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let">let</a>.</p>
       </div>
          <h4>Take away</h4>
          <p>You will have as many function scopes as the functions you have executed. Functions inside functions create nested scopes inside the outer function scopes. There would be a new scope, even a function calls itself. However, you will have only one global scope.</p>  

       </div>
       <div id="accessGlobal">
         <h2>4. Access Variable</h2>
          <p>Consider the situation - you wake up Saturday afternoon and start looking for car keys ( for whatever reason, you completely forgot what you did Friday night). You might search in the following steps-</p>
          <ul>
            <li><strong>First (Room): </strong> First thing you will do is to check inside your room (Image-16).</li>
            <li><strong>Second (key Holder):</strong> If your keys are not found in your room, you will check the key holder (Image-17) next to the door.</li>
            <li><strong>Third (Other part of the house): </strong> If you live in a big apartment building. You will look through the inside of the building. May be in the front lobby (the building entrance)</li>
            <li><strong>Fourth (Outside): </strong> Next step would be to check outside of the house (Image-18) in the backyard or roadside where your park your car.</li>
            <li><strong>Fifth (Lost): </strong> If you don't find your keys outside of the house, you have to say that you lost your keys.</li>
          </ul>          
          <p>If you find the keys inside your room you will not go to check the keys holder or outside.</p>
          <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/messyRoom.jpg" alt="">             
               <p class="imgTitleHolder"><span>Image-16: </span><span class="imageTitle">Searching Key</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/keyHolder.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-17: </span><span class="imageTitle">Key Holder</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/outsideHouse.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-18: </span><span class="imageTitle">OutSide </span></p>
             </div>
           </div>
            <h4>Why are you telling this stupid story every weekend?</h4>
         <div>If you ask for a variable inside a function, JavaScript doesn't know right away whether this variable is a  global variable, a local variable or a parameter. So, it has to follow these same steps. Every single times.
         <ul>
            <li><strong>First (Local Scope): </strong>It checks  the local variables. If it is in the local scope, JavaScript will grab it and give it to you.</li>
            <li><strong>Second (Parameters): </strong>If the variable doesn't exists in the local scope, it will then check the the parameters. (Similar to keys in the key holder in Image-17)</li>
            <li><strong>Third (Outer Scopes) </strong> If the variable you are asking for doesn't exists in the parameter, JavaScript starts walking outside of the function via the scope chain of the current scope. It does this until it hits the end of the chain. The end of the scope is called the "window" object in JavaScript.</li>
            <li><strong>Fourth (Window): </strong> If the variable exists in the global scope, it would be a property of the global object "window". JavaScript will grab it and give it to you.</li>
            <li><strong>Fifth (Undefined): </strong>If the variable doesn't exists in the window object, JavaScript will respond with "undefined". This means the variable you are looking for, doesn't exists.</li>
          </ul>    
        </div>          
         <p> Since local scope is the first place to look for a variable, the local variable gets priority over global and parameter.</p>
         <pre><code>
var x = 9;

function getX(x){
  var x = 7;
  return x;  
}

getX(5); // 7
         </code></pre>
         <h4>Take Away</h4>
         <p>The order of accessing a variable is local variables (inner scope), parameters, outer scope(s) then as a last resort, the global variable (window). If your variable doesn't exist in the global scope, JavaScript will return an undefined.</p>
       </div>
       <div id="globalVarPerf">
         <h2>5. Global Variable Performance</h2>
          <p><strong>Climbing through the Scope Chain: </strong> If you are asking for a global variable from inside of a function, you are climbing through the scope chain. In the code example you are climbing the scope chain for 1,000,000. Every single time, you have to check the local scope, parameters and then get outside of the function. If you are inside of multiple nested functions, then it becomes even more expensive.</p>          
          <pre><code>
var myArr = [0,1,2,3, ...., 1000000];

function getSum(){
  var sum = 0;
  for (var i =0; i&lt;1000000; i++){
    sum += myArr[i];
  }    
  return sum;
}

getSum();
          </code></pre>
          <p>In such expensive cases, you can have a local copy of the global variable. In that case you dont have to climb through the scope chain again and again. Avoid some unnecessary walking.</p>
          <pre><code>
var myArr = [0,1,2,3, ...., 1000000];

function getSum(){
  var sum = 0;
  var localArr = myArr;
  for (var i =0; i&lt;1000000; i++){
    sum += localArr[i];
  }    
  return sum;
}

getSum();
          </code></pre>
          <h4>Take Away</h4>
         <p>If you are accessing global variable over and over, have a local copy of the global variable. If you are doing it just once or twice, you can ignore these minor performance tips.</p>
       </div>       
       <div id="hoisting">
         <h2>6. Hoisting</h2>
         <p>Hoist is a verb meaning to raise. A hoist is also a noun, for example a rope and pulley (Image -19). This type of hoist is used in the factories to raise heavy things. One benefit of raising something to the ceiling is that you can see it from any part of the room/factory. You can also hang/hoist your bike for storage during the winter (Image-20)</p>
         <p>JavaScript does the exact same thing to hoist (raise) a variable declaration and a function declaration to the top of a function scope. Those variables and functions can be used from any part of the function without raising no reference Exception.</p>         
         <div class="imageContainer">
            <div class="imageHolder">
              <img src="../../images/scope/hoist.jpg" alt="">             
              <p class="imgTitleHolder"><span>Image-19: </span><span class="imageTitle">Mechanical Hoist</span></p>
            </div>
            <div class="imageHolder">
              <img src="../../images/scope/hoistBike.jpg" alt="">             
              <p class="imgTitleHolder"><span>Image-20: </span><span class="imageTitle">Hoisting Bike</span></p>
            </div>
            <div class="imageHolder">
               <img src="../../images/scope/antLifting.jpg" alt="">              
              <p class="imgTitleHolder"><span>Image-21:</span><span class="imageTitle">Ant Hoist Power</span></p>
            </div>             
          </div> 
         <p> In the code block below, the variable "b" is declared after the return statement. If you execute the foo function, you will not receive the no reference error. If you dont trust me, copy this code and run it at your console.</p>
         <pre><code>
function foo(){
  return b;
  var b = 7;  
}

foo(); //undefined
         </code></pre>
         <p>While creating <a href="http://davidshariff.com/blog/what-is-the-execution-context-in-javascript/">Context</a> of a function, JavaScript execution engine, scan through the whole function and brings the variable declaration to the top of the scope. Please note the value assignment will not be hoisted. Only the variable declaration is hoisted. And the variable gets the default value of unassigned, variable which is "undefined". Hence, you will get "undefined" returned as the value of "b".</p>

         <pre><code>
function foo(){
  var b;
  return b;
  b = 7;
}
foo(); //undefined
         </code></pre>
         <p>Similarly if you assign a function to a variable (function expression) only the variable part will be hoisted. However if you have a function declaration, the full function will be hoisted.</p>
         <h4>Hoisting Process</h4>
         <p> You can google more about it or read spec or explore V8 code. And if you find any good materials, please let me know.</p>
         <ul>
           <li><strong>function: </strong>Any function declaration will be hoisted at the top.</li>
           <li><strong>variable: </strong>Following the function, the variable declaration will be hoisted next. If you have a function expression (set function to a variable), only the variable part will be hoisted. The assignment of the function to a variable will stay in its place.</li>           
         </ul>
         <p>In the following code block, you have a function expression where the function is assigned to a variable "bar", a function declaration named "foo" and a variable "a".</p>
         <pre><code>
function myFunc() {    
    var bar = function() {
            return 'world';
        };    
    function foo() {
        return 'fooed';
    }
    var a = 5;
}
         </code></pre>
         <p>The function declaration of the function foo will be hoisted to the top, followed by the variable bar (from function expression) and variable "a". Post-hoisting, the above mentioned code will look like-</p>
         <pre><code>
function myFunc() {
    function foo() {
        return 'fooed';
    }    
    var bar;
    var a;    
    bar = function() {
            return 'world';
        };
    a = 5;        
}
         </code></pre>
         <h4>Take Away</h4>
         <p>Only the declaration of a variable is hoisted. The value assigned remains at its location. A function declaration is hoisted. If you have a function expression only the variable part of the function expression will be hoisted.</p>
       </div>
       <div id="closure">
         <h2>7. Closure</h2>
         <p>If you have a function within a function, execution of the inner function will create a scope inside of the outer function- a nested scope. Because the inside function scope is enclosed by the outer function scope, the inner function scope is called a closure (I invented this definition). Remember, to be a closure, you dont have to return a function, you just have to call a function inside a function.</p>
         <pre><code>
function a(){
  function b(){
     console.log('closure');
  }
  b(); //creates closure
}
         </code></pre>
         <p><strong>Closure Example:: </strong>Closure is a powerful feature of JavaScript. Let's have a look into the following example. We have a outer function called "counter" that has a local/private variable "i" and it returns a function (the returning function doesn't have a name and is known as the anonymous function). Inside the returning function (the inner function) returns the value of i and increases it by 1. Aha, very simple!</p>
         <pre><code>
function counter(){
    var i = 0;
    
    return function(){
       return i++;
    }
}
         </code></pre>
         <p> <strong>Step-1: </strong>In the following code, we execute a counter function and assign the result of the counter to a variable "a". Hence, the value of "a" will be the inner function (returning function). Just remember the inner function returns the value of "i" and also increase the value of "i". Hence, when you execute the function "a", you will get the value of "i".</p>
         <p><strong>Step-2: </strong> Now if you execute function "a" (execute inner function), it will return 0 (value of i)  and will increase it by 1. If you execute function "a" again it will return 1 (current value of i)  and will increase the value of "i" by 1. Hence, in your subsequent call you will get 2, 3, 4, 5 ....</p>
         <p>This means, closure holds the state of the local/private variable in the outer scope. And every time, you call it you get the value of "i" increased by 1. Have a look at Image-22 and try to understand it. If you don't get it the time around .... try, try again!</p>
         
         <pre><code>
var a = counter();
a(); //0
a(); //1
a(); //2
a(); //3
a(); //4
a(); //5
         </code></pre>
         <p>Now you can have another variable "b" and assign the execution result of the function counter. If you execute "b" (the inner function of the counter), you will get 0. If you execute "b" again, you will get 1. followed by 2, 3, 4, ...</p>
         <pre><code>
var b = counter();
b(); //0
b(); //1
b(); //2
b(); //3
         </code></pre>
          <p>This means, each closure maintains separate private variables of the outer function. This is a very powerful feature of JavaScript. Have a look at Image-23</p>
         <div class="imageContainer">            
            <div class="imageHolder">
              <img src="../../images/scope/closureOneFunc.png" alt="">             
              <p class="imgTitleHolder"><span>Image-22: </span><span class="imageTitle">Scope inside Scope</span></p>
            </div>
            <div class="imageHolder">
               <img src="../../images/scope/closureTwoFunc.png" alt="">              
              <p class="imgTitleHolder"><span>Image-23: </span><span class="imageTitle">Separate Privacy</span></p>
            </div>             
            <div class="imageHolder">
              <img src="../../images/scope/closure.jpg" alt="">             
              <p class="imgTitleHolder"><span>Image-24: </span><span class="imageTitle">Closure is Fun</span></p>
            </div>
          </div> 
          
         <p><strong>Encapsulation:: </strong>You would not be able to access (get or set) the value of "i" from outside. Hence the privacy of the value of "i" is maintained secretly. This is called encapsulation in object oriented programming.</p>
         <div id="closurePerf">
         <h3>Closure Performance</h3>
         <p>Don't use a closure when you dont need a closure. And don't create too many nested scope. Why do more than you need? (Image-24)</p>
         <p> Don't hold excessively large private memory. This could cause <a href="http://www.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/"> memory leak</a></p>
         <pre><code>
//try to avoid this
function a() {
    var largeStr = new Array(1000000).join('x');
    return function () {
        return largeStr;
    };
}
         </code></pre>
       </div>
          <h4>Take Away</h4>
          <p>If you execute a function inside a function, a closure is created. It is not necessary to return a function in order to create a closure..</p>
          <p>Closure saves the state of the outer function variable but does not expose those private variables. Now you can hide implementation detail while using closure. This is called encapsulation.</p>
       </div>       
       <div class="contextVsScope">
         <h3 class="text-danger">Don't mix up scope and context</h3>
         <p><strong>Scope:: </strong>Scope determines the variable access of a function when it is executed. It depends on where and how a function is executed. Scope is unique to each execution. </p>
         <p><strong>Context:: </strong>Context depends on how the function is called. The laymen version of context is the value of "this". If you want to learn more, read <a href="http://davidshariff.com/blog/what-is-the-execution-context-in-javascript/">Execution context and Stack in JavaScript</a> or watch <a href="https://www.youtube.com/watch?v=yuo8YqKDQ-M">Understanding JavaScript this in a crystal clear way</a></p>         
       </div>  
       <div id="summary">
        <h2>Summary</h2>
        <h4>Summary is just a collection of Take Aways from each section</h4>
        <ul>
          <li><strong>Global Scope:: </strong>Global variables are exactly like global stars (Jackie Chan, Nelson Mandela). You can access them (get or set value of it), from any part of your application. Global functions are like global events (New Year, Christmas). You can execute (call) them from any part of your application.</li>
          <li><strong>Local Scope::</strong>Local variables are like local stars. You can access it (get or set value of it) only inside that scope. Local function is like local events. you can execute (celebrate) only inside that scope.</li>
          <li><strong>Multiple Scope:: </strong>You will have as many function scope as many function you have executed. Function inside a function will create a nested scope inside of the scope of the outer function. There would be a new scope, even a function calls itself. However, you will have only one global scope.</li>
          <li><strong>Access Variable:: </strong>The order of accessing variable is local variables (inner scope), parameters, outer scope(s), global variable (window). If your variable doesn't exist in the global scope, you will get undefined.</li>
          <li><strong>Global Variable Performance:: </strong>If you are accessing global variable for hundreds of times, have a local copy of the global variable. If you are doing it for once or twice, you can ignore this minor performance tips.</li>
          <li><strong>Hoisting:: </strong>Only the declaration of a variable is hoisted. Value assigned remains at its place. Function declaration is hoisted. If you have a function expression only the variable part of the function expression will be hoisted.</li>
          <li><strong>Closure:: </strong>If you execute a function inside a function, a closure is created. Closure could return a function. Closure saves state of outer function variable (private variable) but do not expose those. In that way you can hide implementation detail while using closure. This is called encapsulation.</li>
        </ul>        
      </div>     
      <div id="references">
        <h2>references</h2>
        <p><a href="http://davidshariff.com/blog/javascript-scope-chain-and-closures/">JavaScript Identity resolution and Scope chain</a>, <a href="http://ryanmorr.com/understanding-scope-and-context-in-javascript/">Understanding Scope and Context</a>, <a href="http://www.kirupa.com/html5/variable_scope_js.htm">Variable scope explain</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope">MDN: Functions and function scope</a>
      </div>

      <div>
        <h3 class="purpleBold">Express anger!</h3>
        <p class="gray">Feel free to express your anger (sorry u have to use facebook). also find out mistakes ( technical, wrong answer, spelling, grammar, sentence, whatever), let ur dude learn and grow.</p>
        <div class="fb-comments" data-href="http://www.thatjsdude.com/interview/js1.html" data-numposts="5" data-colorscheme="light"></div>
      </div>
      <hr>

      <footer>
        <p>&copy;thatJSDude 2014</p>
      </footer>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../js/jquery-2.0.3.min.js"></script>    
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>    
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/toggleExample.js"></script>
    <script type="text/javascript">
      //social plugins
      //g+
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
      //fb
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
  </body>
</html>
