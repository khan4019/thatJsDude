<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="that js dude" content="">    
    <title>JS: scope &amp; hoisting</title>

    <link rel="shortcut icon" href="../../images/favicon.jpg">    
    <link rel="stylesheet" href="../../css/bootstrap.min.css" >
    <link rel="stylesheet" href="../../css/zenburn.css">
    <!-- Custom styles for this template -->
    <style>
      /* Move down content because we have a fixed navbar that is 50px tall */
      body {        
        padding-bottom: 20px;
      }
      .purpleBold{
        color:purple;        
        font-weight: bold;
      }
      .gray{
        color: gray;
      }
      .blueish{
        color: rgba(151, 182, 209, 0.98);
      }
      .singInStuff{
        margin-top: 9px;
      }
      #uName{
        margin-top: -7px;
      }
      .skipListItem{
        list-style-type: none;
      }
      .skipListItem a{
        color: inherit;
      }
      a:visited
      { 
        color: rgba(218, 209, 149, 0.98);
      }
      .imageContainer{
        overflow: hidden;
        margin: 1% 0 1% 0;
      }
      .imageHolder{
        float: left;
        padding: 1%;
        margin: 0 1%;
        border: 10px solid #f5f5f5;
        border-radius: 8px;
      }
      .imageHolder img{
        max-height: 180px;
        height: 180px;
        width: 280px;
        float: left;        
      }
      .imgTitleHolder{
        margin: 0 0 0 8%;
      }
      .imageHolder .imageTitle{
        font-weight: bold;
        font-size: 1.2em;
      }

      /*style for demo*/
      
    </style>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
 
  <body>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>JS: scope &amp; hoisting</h1>                
        <p>March 16, 2014</p>
        <div id="fb-root"></div><div class="fb-like" data-href="http://www.thatjsdude.com/interview/js1.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div> &nbsp;<div class="g-plusone"></div>
      </div>
    </div>
    <div class="container">
      <!-- Example row of columns -->

      <div class="row center">        
        <!-- <iframe width="853" height="480" src="//www.youtube.com/embed/Rx_JFOSxgpY" frameborder="0" allowfullscreen></iframe> -->
      </div>
      <div class="row center">
        <ol>
          <li>different ways to create function</li>
          <li>function declaration, expression, IIFE</li>
          <li>arguments</li>
          <li>this</li>
          <li>scope</li>
          <li>how funtion is executed</li>
          <li>bind call apply</li>
          <li>function as a object</li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
        </ol>
      </div>
      <div id="execution_Context">
         <h2>Execution context</h2>         
         <p>Three execution context in javaScript</p>
         <ol>
           <li><strong>global context</strong>- default environment for code execution. You will have only one global context and anything declared in the global context is accessible from anywhere of your code.</li>
           <li><strong>functional context</strong>-executing code inside a function. anything declared inside a function can be accessed inside the function. However, from inside of a function you can access anything global.</li>
           <li><strong>eval context</strong>-inside eval execution</li>
         </ol>         
         
         <p>you will have as many function context as many function you have declared. function inside a function will create a function context inside the function. However, you will have only one global context.</p>         

         <p>ref: <a href="http://davidshariff.com/blog/what-is-the-execution-context-in-javascript/">execution context</a></p>
       </div>
       <div id="globalContext">
           <h2>Global context</h2>

           <p><strong>Global::</strong> What comes to your mind, when somebody say global? You try to visualize the globe you have seen in high school. If you have never been to a high school, have a look at Image -1.</p>
           <p><strong>Global Star::</strong> Look at image -2. If you cant see a person in the top right corner, borrow a magnifying glass from your grandma. It's Jackie Chan. He is a global star. People will recognize him from any part of the world.</p>
           <p><strong>Global Variable::</strong> Global variable is exactly like global star. you can access it (get or set value of it), from any part of you application.</p>

           <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/globe.png" alt="">             
               <p class="imgTitleHolder"><span>Image-1:</span><span class="imageTitle">The Globe</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/globeJackie.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-2:</span><span class="imageTitle">The Global Star</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/jackie.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-3:</span><span class="imageTitle">Mr. Jackie Chan</span></p>
             </div>
           </div>
          <br>
          <p>In the code block below, "a" is a global variable and "b" is a global function. you can access global variable inside the function.</p>
          <pre><code>
//global variable
var a = 2;

//global function
function b(){
   console.log(a);  //access global variable
}

b(); //execute global function.
          </code></pre>
          <p><strong>Global Things::</strong> So, you can easily recognize global star like Nelson Mandela, Princess Diana, etc. Similarly, you can easily recognize global activities like "New Year celebration", "Christmas", "Olympic Games", etc. from any part of the world. Have a look at Image -5.</p>
          <p><strong>Global Scope::</strong> Anything in the global scope could be accessible from any part of your application. You can put global variable which is similar to global star and global activities which is similar to global functions.</p>

         <div class="imageContainer">
          <div class="imageHolder">
             <img src="../../images/scope/newYear.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-4:</span><span class="imageTitle">Happy New Year</span></p>
           </div>
           <div class="imageHolder">
             <img src="../../images/scope/globeStars.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-5:</span><span class="imageTitle">Global Things</span></p>
           </div>
           <div class="imageHolder">
              <img src="../../images/scope/globalScope.png" alt="">              
             <p class="imgTitleHolder"><span>Image-6:</span><span class="imageTitle">Global Scope</span></p>
           </div>           
         </div>
         <br>
          <h4>Take away</h4>
          <p> Global variables are exactly like global stars. you can access it (get or set value of it), from any part of you application. Global function is like global events. you can execute (celebrate) from any part of your application.</p>          
          <p>Global variables and functions are executed in the global context.</p>
       </div>
       <div id="localContext">
           <h2>Local context</h2>

           <p><strong>Local::</strong> What comes to your mind, when somebody say local? If you are smart like me, you will say, what is not global is local. Think about a part of the world. for example, the USA. Its a country, a part of the world. If you don't know where is USA, I marked it for you in Image -7.</p>
           <p><strong>Local Star::</strong> Look at image -8. If you are in USA, you might know her as she makes a lot of news (somehow manage to make news). But people outside of USA, will not recognize her. Sher is a local star.</p>
           <p><strong>Local Variable::</strong> Local variables are exactly like local stars. you can access it (get or set value of it), only in the local scope. In JavaScript local scope is defined by a function. If you declare a variable inside a function, you can only access it (get or set value), inside the function. If you want to access it from outside of the function, you will get a reference error.</p>

           <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/local.jpg" alt="">             
               <p class="imgTitleHolder"><span>Image-7:</span><span class="imageTitle">The Local</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/kd.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-8:</span><span class="imageTitle">Kim Kardashian</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/localStar.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-9:</span><span class="imageTitle">The Local Star</span></p>
             </div>
           </div>
          <br>
          <p>In the code block below, "d" is a local variable. you can access it (get or set value) inside the function "b". If you want to access it outside of the function, you will throw a reference error.</p>
          <pre><code>
var a = 2; 
function b(){
   var d = 21; //local variable
   console.log(d); //can access it inside the function
}
b();  // 21

console.log(d); //ReferenceError: d is not defined
          </code></pre>
          <p><strong>Local Events::</strong> Think about American football (Image-10). Not the football (soccer) rest of the world knows. Its crazily famous here including super bowl. But people outside of the world doesn't know about  it. Similarly, any functions inside a function will only be accessible inside it (you can execute it).</p>
          <p><strong>Local Scope::</strong> Anything in the local scope (inside a function) is only accessible inside that local scope. You can compare local variable like local star and local activities like a function inside a function in Image-11.</p>
          <p><strong>Connected to Global::</strong> Local scope is connected to the global scope. In the Image-12, see a dotted line/chain towards global scope. Thats the way you have access to any global variables/functions. This link/chain is called scope chain. We will talk more about it later.</p>
         <div class="imageContainer">
           <div class="imageHolder">
             <img src="../../images/scope/football.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-10:</span><span class="imageTitle">Local Events</span></p>
           </div>
           <div class="imageHolder">
             <img src="../../images/scope/localEvents.jpg" alt="">             
             <p class="imgTitleHolder"><span>Image-11:</span><span class="imageTitle">Local Events</span></p>
           </div>
           <div class="imageHolder">
              <img src="../../images/scope/localScope.png" alt="">              
             <p class="imgTitleHolder"><span>Image-12:</span><span class="imageTitle">Local Scope</span></p>
           </div>           
         </div>    
         <p><strong>Implicit Global::</strong> if you forget to put var in front of the variable inside a function, it becomes a global variable. In the code block below, "a", "e" and "i" are global variables. you might not wanted "e" and "i" to be global. So, be careful.</p>
         <pre><code>
var a = 21;

function b(){
  var d = 7;
  e = 14;
  for(i =0; i&lt;5; i++){
    console.log(e);  
  }  
}
         </code></pre>     
          <h4>Take away</h4>
          <p> Local variables are exactly like local stars. You can access it (get or set value of it) only inside that scope. Local function is like local events. you can execute (celebrate) only inside that scope.</p>          
          <p>Local variables and functions are executed in the local context.</p>
       </div>
       <div id="multipleContext">
           <h2>Multiple context</h2>
           <p><strong>Multiple functions::</strong> If you have more than one functions and you execute them, each one of them will create their own scope. However, every execution context will be linked to the global scope. Thats how you will have access to the global scope. Have a look at Image -13.</p>
           <p><strong>Inside Scope::</strong> If you have a function inside of another function and you execute the inner function. The inner function will create a scope inside the outer function. Look at the Image-14. Remember, the inner one will have access to the outer function variable and outer one will have access to the global variable. Stare at Image-14 for 5 minutes and shed tears for 3 minutes.</p>
           <p><strong>Closure::</strong> If you have a function inside a function, this is called closure. Closure is a powerful feature of JavaScript for encapsulation. Don't worry about it for now, I will make a separate post on closure. Some of your function could be closure (Image-15)</p>

           <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/multiScope.png" alt="">             
               <p class="imgTitleHolder"><span>Image-13:</span><span class="imageTitle">Multiple Scope</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/closure1.png" alt="">              
               <p class="imgTitleHolder"><span>Image-14:</span><span class="imageTitle">Nested Scope</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/closureScope.png" alt="">              
               <p class="imgTitleHolder"><span>Image-15:</span><span class="imageTitle">JavaScript Scope</span></p>
             </div>
           </div>
         <br>
         <p>In the code block, below function "b" and function "c" creates separate context like Image-13</p>
         <pre><code>
var a = 2;

function b(){ 
  console.log(a); 
}

function c(){ 
  console.log(a); 
}

b(); // context for executing function "b" 
c(); // context for executing function "c" 
         </code></pre>
         <br>
         <p>In the code block below, at the time of execution of function "b", function "dog" will be executed and it will create a new scope inside the scope of function "b". Refer to Image-14 </p>
         <pre><code>
var a = 2; 
function b(){ 
   var d = 21;
   function dog(){  console.log(a); }
   dog(); //closure is created
}

function c(){ console.log(a); }

b();            
c();
         </code></pre>
          <h4>Take away</h4>
          <p>you will have as many function context as many function you have executed. Function inside a function will create a function context inside of the function it is executed. There would be a new scope, if a function calls itself. However, you will have only one global context.</p>          
       </div>
       <div id="accessGlobal">
         <h2>Access Global</h2>
          <p>Say, we wake up Saturday afternoon (forgot there was a Friday night) and looking for the keys of your car.</p>
          <ul>
            <li><strong>First (Check Room): </strong> First thing you will do is to check your room (Image-16).</li>
            <li><strong>Second (key Holder):</strong> If it is not there, you will check the key holder (Image-17) next to the door.</li>
            <li><strong>Third (Other part of the house): </strong> If you live in big apartment building. you will look into inside of the building. May be in the front lobby (the way you get in to your apartment)</li>
            <li><strong>Fourth (Outside): </strong> Next step would be check outside of the house (Image-18)</li>
            <li><strong>Fifth (Lost): </strong> If you don't find it in the outside of the house, you have to say, your keys are lost.</li>
          </ul>
          <div class="imageContainer">
             <div class="imageHolder">
               <img src="../../images/scope/messyRoom.jpg" alt="">             
               <p class="imgTitleHolder"><span>Image-16:</span><span class="imageTitle">Searching Key</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/keyHolder.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-17:</span><span class="imageTitle">Key Holder</span></p>
             </div>
             <div class="imageHolder">
                <img src="../../images/scope/outsideHouse.jpg" alt="">              
               <p class="imgTitleHolder"><span>Image-18:</span><span class="imageTitle">OutSide </span></p>
             </div>
           </div>
            <h4>Why are you telling this stupid thing?</h4>
         <div>If you ask for a global variable inside a function, JavaScript doesn't know right away whether this variable you are asking for is a  global variable or local variable. So, it has to follow the following steps.
         <ul>
            <li><strong>First (Local Scope): </strong>It checks with local variable. if it is in the local scope will grab it and give it to you.</li>
            <li><strong>Second (Parameters): </strong>If the variable doesn't exists in the local scope then it check to the parameters.</li>
            <li><strong>Third (Outer Scopes) </strong> If the variable you are asking for doesn't exists in the parameter then it starts walk outside of the function via scope chain. of the current scope through scope chain until it hits window (the last end of the scope chain)</li>
            <li><strong>Fourth (Window): </strong> If the variable exists in the global scope, it would be a property of the global object "window".</li>
            <li><strong>Fifth (Undefined): </strong>If the variable doesnt exists in the window object, JavaScript will return "undefined".</li>
          </ul>    
        </div>
          
         <p> Since local scope is the first place to look for variable, local variable gets priority over global.</p>
         <pre><code>
var x = 9;

function getX(x){
  var x = 7;
  return x;  
}

getX(5); // 7
         </code></pre>
       </div>
       <div id="reduceGlobal">
         <h2>Avoid Global</h2>
          <p><strong>Less climbing on the Scope Chain: </strong> If you are asking for a global variable from inside of a function, you are climbing scope chain. In the code example you are climbing the scope chain for 1000000. Every single time, you have to check localScope, parameters and then get outside of the function. If you have more than one function inside function, this becomes even more expensive.</p>          
          <pre><code>
var myArr = [0,1,2,3, ...., 1000000];

function getSum(){
  var sum = 0;
  for (var i =0; i&lt;1000000; i++){
    sum += myArr[i];
  }    
  return sum;
}

getSum();
          </code></pre>
          <p>If you have to access global variable for several times, you can have a local copy of the global variable. In that case you dont have to climb scope chain</p>
          <pre><code>
var myArr = [0,1,2,3, ...., 1000000];

function getSum(){
  var sum = 0;
  var localArr = myArr;
  for (var i =0; i&lt;1000000; i++){
    sum += localArr[i];
  }    
  return sum;
}

getSum();
          </code></pre>          
       </div>
       <div id="blockScope">
          <h2>Block Scope</h2>
         <p><strong>Block Scope::</strong> JavaScript dont support block scope. Hence</p>
       </div>
       <div class="contextVsScope">
         <h2 class="text-danger">don't mix up scope and context</h2>
         <h4>Scope</h4>
         <p>Scope determines variable access of a function when it is executed. It depends on where and how function is executed. And scope is unique to each execution. </p>
         <h4>Context</h4>
         <p>context depends on how the function is called. In a lamen version of context is the value of "this". If you want to learn more. refer to the video/blog</p>
         <p>if you want to know more about context. w</p>
       </div>
       <div>
         <h3>Todos</h3>
         <ol>
           <li>ES6 dont support block scope</li>
           <li>let</li>
           <li>hoisting</li>
           <li>local variable get preference over global variable <a href="http://javascriptissexy.com/javascript-variable-scope-and-hoisting-explained/">example</a></li>
         </ol>
       </div>
       <div>
          <h2>execution context in detail</h2>
          <h3><a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf">spec: 10.4</a></h3>
          <p>each function establishes and enters a new execution context event it calls itself recursively. Every return exits an execution context. if exception is thrown a function could exit one or more execution context.</p>
         <p>When a control enters an execution context, the following things are set</p>
           <ul>
             <li><strong>LexicalEnvironment</strong>- set lexical environment scope</li>             
             <li><strong>VariableEnvironment</strong>- variables, functions and parameters/ arguments (for function code) are added to variable environment.</li>
             <li><strong>thisBinding</strong>- set value associated with <code>this</code></li>             
           </ul>         
         <p><strong></strong>Then values are assigned, functions are refereed and code is executed.</p>

         <p><strong>Animation:</strong> ref: <a href="http://davidshariff.com/blog/what-is-the-execution-context-in-javascrip">activation/variable object</a></p>
       </div>
      <div id="scope">
        <h2>scope</h2>
        <p><strong>animate:</strong> ref: <a href="http://davidshariff.com/blog/javascript-scope-chain-and-closures/">i =5</a> or ggl accidental closure</p>
        <p>what is scope? does is it mean what you can see and what you cant see.</p>
        <p>talk about lexical scope and variable scope and execution scope</p>
        <p>set the terminology</p>
        <p>what is the scope of single function. talk about that before talking about function inside a function</p>
        <p><strong>lexical scope</strong> at the time of compile, scope of a function is defined. </p>
        
      </div> 
      <div>
        <h2>references</h2>
        <p>read these with shariff</p>
        <ol>
          <li><a href="http://www.kirupa.com/html5/variable_scope_js.htm">variable scope explain</a> </li>          
          <li><a href="http://javascriptissexy.com/javascript-variable-scope-and-hoisting-explained/">scope and hoisting explained</a> </li>
          <li> <a href="http://ryanmorr.com/understanding-scope-and-context-in-javascript/">just can read it</a></li>
          <li><a href="http://www.kirupa.com/html5/closures_in_javascript.htm">Closure related: just keep the link</a> </li>
          <li><a href="http://ryanmorr.com/understanding-scope-and-context-in-javascript/">can read it. not excellent</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope">Don't forget to talk about => and let</a></li>          
        </ol>
      </div>

      <div>
        <h3 class="purpleBold">Express anger!</h3>
        <p class="gray">Feel free to express your anger (sorry u have to use facebook). also find out mistakes ( technical, wrong answer, spelling, grammar, sentence, whatever), let ur dude learn and grow.</p>
        <div class="fb-comments" data-href="http://www.thatjsdude.com/interview/js1.html" data-numposts="5" data-colorscheme="light"></div>
      </div>
      <hr>

      <footer>
        <p>&copy;thatJSDude 2014</p>
      </footer>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../js/jquery-2.0.3.min.js"></script>    
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>    
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/toggleExample.js"></script>
    <script type="text/javascript">
      // //social plugins
      // //g+
      // (function() {
      //   var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      //   po.src = 'https://apis.google.com/js/platform.js';
      //   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      // })();
      // //fb
      // (function(d, s, id) {
      //   var js, fjs = d.getElementsByTagName(s)[0];
      //   if (d.getElementById(id)) return;
      //   js = d.createElement(s); js.id = id;
      //   js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      //   fjs.parentNode.insertBefore(js, fjs);
      // }(document, 'script', 'facebook-jssdk'));
    </script>
  </body>
</html>
