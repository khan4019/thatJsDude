<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="that js dude" content="">
    <link rel="shortcut icon" href="../../images/favicon.jpg">

    <title>JS: looping</title>

    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/zenburn.css">
    <!-- Custom styles for this template -->
    <style>
      /* Move down content because we have a fixed navbar that is 50px tall */
      body {
        padding-top: 50px;
        padding-bottom: 20px;
      }
      .purpleBold{
        color:purple;        
        font-weight: bold;
      }
      .singInStuff{
        margin-top: 9px;
      }
      #uName{
        margin-top: -7px;
      }
    </style>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">          
          <a class="navbar-brand" href="../../index.html">That Js Dude</a>
        </div>
        <div class="navbar-collapse collapse singInStuff">          
          <a href='#' class="btn btn-success  navbar-right" id="loginText"> sign in </a>
          <a href="#" class="btn btn-success  navbar-right hide" id="logoutText">log out </a>
          <a href="#" class="navbar-brand navbar-right" id="uName" >Welcome</a>
          <iframe name="myIFrame" id="myIFrame" class="hide"></iframe>
        </div><!--/.navbar-collapse -->
      </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>Fast looping</h1>        
        <h2>10 tricks to run faster loop</h2>
        <p>need to add some junk text here...</p>        
      </div>
    </div>
    <div class="container">
      <!-- Example row of columns -->

      <div class="row center">        
        <!-- <iframe class="videoLink" width="853" height="480" src="//www.youtube.com/embed/2zmUSoVMyRU" frameborder="0" allowfullscreen></iframe>  -->
      </div>
            
      <h3>If you have hard time to follow this video, you can see the content below. Things you will learn-</h3>
       <ol>            
        <li><a href="">Fun with for loop</a></li>
       </ol>
      <h2>Parts of this blog</h2>
      <ul>
        <li>parts of a for loop</li>
        <li>len</li>
        <li>optional</li>
        <li>why backward is faster</li>
        <li>cache function</li>
        <li>for in</li>
        <li>while</li>
        <li>for of</li>
        <li>do while</li>
        <li>build in array forEach</li>
        <li>something interesting</li>
      </ul>
<!-- div>h2+p+pre>code -->
    <div>
      <h2>a for loop</h2>
      <p>here is the innocent for loop that you write everyday</p>
      <pre><code>
var a = [1, 2, 3, 4];

for(var i =0; i&lt;a.length; i++){
  console.log(a[i]);
}
      </code></pre>
      <strong>Parts of For loop</strong>
      <p> you need four semi-colon in your for loop, hence there are four parts of a for loop.</p>
      <pre><code>
for(initiation; iteratingCondition; repeatingExpression){
  repeatingCode
}
      </code></pre>
      <p><strong>initiation:</strong> this initializes the variable(s). Usually, you declare one or more variables and assign values to them. One important not about this part is it will run only once while executing the for loop</p>
      <p>iteratingCondition, repeatingExpression and repeatingCode run every time loop is executed</p>
      <p>Another important note about all the four parts is they optional. This mean you can skip one, more or all of them. However you have to put the semicolons and have to have terminating condition, otherwise your loop will run forever.</p>
    </div>
    <div>
      <h2>Calculate length only once</h2>
      <p>Now look at my innocent for loop. In the iterating condition, i have <code>i&lt;a.length</code> and iterating condition is executed every single time loop is executed. hence, length of the array will be calculated every single time. If you run the loop for 1000 times, you will get a performance hit.</p>
      <p><strong>solution:</strong> The solution to this problem is to set the length of the array to a variable in the initiation stage and use that variable in the iteratingCondition. In this approach, you are calculating length of the array only once. </p>
  <pre><code>
for(var i =0, len = a.length; i&ltlen; i++){
  //my awesome looping
}
  </code></pre>
    </div>
    <div>
      <h2>backward is faster</h2>
      <pre><code>
var myArr = [0,1,2,3,4,5 ...];

//forward
for(var j = 0; j&lt;1000; j++){
  console.log(myArr[j]);
}

//backward
for(var k = 1000; k>=0; k--){
  console.log(myArr[k]);
}
      </code></pre>
    </div>
    <div>
      <h2>cache loop function</h2>
      <pre><code>
var arr = [];
for (var i = 0; i &lt; 1000; i++) {
  arr.push([1, 2, 3].map(function (x) { return x * x; }));
}
              </code></pre>
              <pre class="fragment"><code>
var arr = [];
var sq = function (x) { return x * x; };

for (var i = 0; i &lt; 1000; i++) {
  arr.push([1, 2, 3].map(sq));
}
              </code></pre>
    </div>
    <div>
      <h2>filter vs loop</h2>
      <pre><code>
var myArray = [{"number":1,"name":"Fred"},{"number":2,"name":"John"},{"number":3,"name":"Toni"},{"number":4,"name":"Sarah"}];

function byFilter(myArr, num){
    return myArr.filter(function (el) {
        return el.number === num;
    });
}</code></pre>
              <pre class="fragment"><code>
function byForLoop(myArr, num){
    var i, l;
    for (i = 0, l = myArr.length; i &lt; l; i += 1) {
        if (myArr[i].number === num) {
            return [myArr[i]];
        }
     }
     return [];
}</code></pre>
              <a href="http://jsperf.com/array-filter-vs-simple-loop/2">filter vs simple loop</a>
              <ol class="fragment">
                <li>range of elements is set before the first call</li>
                <li>new elements will not be visited</li>
                <li>if elements are changed or deleted, their value would be original</li>
                <li class="fragment"> robustness comes with the expense of overhead</li>
              </ol> 
              <br><br>
              <li class="fragment">also happens for: map, forEach, every, any, etc.</li>                      
              <ol class="fragment">
                <li>for trusted data</li>
                <li>not to have deleted values</li>
                <li>well behaved callbackfn</li>
              </ol>
              <a href="http://monkeyandcrow.com/blog/why_javascripts_filter_is_slow/">why native filter method is slow</a>
    </div>
    <div>
      <h2>extra</h2>
      <p>you can declare as many variable as needed in the initiation condition.</p>
      <p>if you care about <a href="scope.html#hoisting">hoisting</a> and you can declare the variables at the top of your scope and keep initiation empty.</p>
      <pre><code>
for(var i =0, len = myArr.length, k = 15; i&ltlen; i++){
  //my awesome looping
}

//skip initiation
var i =0, 
    len = myArr.length;
for(; i&ltlen; i++){
  //my awesome looping
}
      </code></pre>
    </div>    

<div>

<h2>loose parts starts from here</h2>
<p>you can have multiple condition in the 2nd statement or you can skip it (make sure u have a break somewhere otherwise it will run forever)</p>
<pre><code>
var myArr = [1,2,3,4,5,6,7,8,9], 
    i = myArr.length;

for(; i>=0 && i%5!=0;i--){
  console.log(myArr[i]);  
}

//skip second statement
var i=5;
for(;;i--){
  console.log(i);
  if(!i) break;
}
</code></pre>

<p>you can miss the third statement as well. Make sure u change looping variable otherwise you will run forever</p>
<pre><code>
var i=5;
for(;;){
  console.log(i--);
  if(!i) break;
}
</code></pre>
<strong>reverse direction</strong>
<p>if you loop from the end of the array. when the value of i reacher 0, this is coerced to false and break the loop.</p>
<pre><code>
for (var i=myArr.length; i--;) {
  console.log(myArr[i]);    
}
</code></pre>
<strong>optional repeatingCode</strong>
<p>you can run a loop without repeating code. you can take advantage of any valid expression in the iteratingCodition and repeatingExpression.</p>
<p>disclaimer: next couple of example are shamelessly copied/ little modified from Angus Croll blog. ref <a href="http://javascriptweblog.wordpress.com/2010/10/11/rethinking-javascript-for-loops/#more-1479">Angus croll: </a> </p>
<pre><code>
for (
    var i=2, r=[0,1];
    i<10 || console.log(r);
    r.push(r[i-1] + r[i-2]), i++
);
//[0,1,1,2,3,5,8,13,21,34]
</code></pre>
<p>Here we are trying to get fibonacci series. first we declare a lopping variable i and an array, r with two elements. In the iteratingCodition we check whether i is less then 10, if not we console r. In the repeatingExpression we push add last two elements of the array to push it inside the array and increment i. Very simple. and then we get the fibonacci series upto 10.</p>
<strong>assigning variable in iteratingCondition</strong>
<pre><code>
for (var i=0, item, myArr = [1, 2, 3, 4]; item = myArr[i]; i++) {
  console.log(item);
}
 = 1
 = 2
 = 3
 = 4
</code></pre>
<strong>similar one</strong>
<pre><code>
for (var myArr = [1, 2, 3, 4], i = myArr.length, sum = 0; 
     i-- || console.log(sum); 
     sum += arr[i]);

 = 10 
</code></pre>
<p>Just looping backward. and if i becomes 0 that is considered as false and console the sum. in looping codition just add the value to sum.</p>
<strong>another similar but little good</strong>(may be u can remove it)
<pre><code>
function sumAndMultiply(arr, x) {
    for (var i=arr.length, r=0; i-- || ((r = r*x) && false); r += arr[i]);
    return r;
}
sumAndMultiply([3,5,0,-2,7,8], 5); //105
//Brendan Eich suggested using the void operator instead:

function sumAndMultiply(arr, x) {
        for (var i=arr.length, r=0; i-- || void (r = r*x); r += arr[i]);
    return r;
}
</code></pre>
<h3>filter vs if</h3>
<pre><code>
var myArray = [{"number":1,"name":"Fred"},{"number":2,"name":"John"},{"number":3,"name":"Toni"},{"number":4,"name":"Sarah"}];

function byFilter(myArr, num){
    return myArr.filter(function (el) {
        return el.number === num;
    });
}
</code></pre>
<p>filter, foreach, some, any has to make the array cache and blah blah...read that</p>
<pre><code>
function byForLoop(myArr, num){
    var i, l;
    for (i = 0, l = myArr.length; i &lt; l; i += 1) {
        if (myArr[i].number === num) {
            return [myArr[i]];
        }
     }
     return [];
}
</code></pre>
<p>ref <a href="http://jsperf.com/array-filter-vs-simple-loop/2">jsPerf</a></p>
</div>
<div>
  <h2>for..in</h2>
  <p>for..in only iterate over all enumerable properties of the object itself and those the object inherits from its constructor's prototype. if you want to exclude inherited properties you can use hasOwnProperty</p>
  <p>It is not guranteed that for..in will maintain an order. So, for..in should not be used to iterate over an Array where index order is important.</p>
  <pre><code>
var obj = {a:1, b:2}
for(var i in obj){
  console.log(obj[i]);
}
 = 1
 = 2

var myArr = [1,2];
for(var i in myArr){
  console.log(myArr[i]);
}
 = 1
 = 2 
  </code></pre>
<strong>properties that are iterated</strong>
<p>will be iterate over all the properties whose [[enumerable]] is true. also over [[enumerable]] properties that are inherited via prototype chain.</p>
<pre><code>
var myArr = [1,2,3]
myArr['-7'] = -7;
myArr[2.5] =2.5;
myArr['dude'] = 'thatJsDude'

for(var i in myArr){
  console.log(myArr[i]);
}

 = 1
 = 2
 = 3
 = -7
 = 2.5
 = thatJsDude


 //for loop don't read from properties
 for(var i = 0, len = myArr.length; i&lt;len; i++){
  console.log(myArr[i]);
}
 = 1
 = 2
 = 3 
</code></pre>
<strong>dont modify build in function</strong>
<p>custom extension will also show up</p>
<pre><code>
var myArr = [1, 2, 3];
Array.prototype.myEach = function(){/*do something*/}

for(var i in myArr){
  console.log(myArr[i]);
}
 = 1
 = 2
 = 3
 = function (){/*do something*/}
</code></pre>
<strong>hasOwnProperty</strong>
<p>removes custom extension or inherited properties</p>
<pre><code>
for(var i in myArr){
  if(myArr.hasOwnProperty(i)){
     console.log(myArr[i]);
  } 
}
 = 1
 = 2
 = 3
</code></pre>
<strong>order of iteration</strong>
<p>add something for this</p>
<pre><code>
//add ur code here
</code></pre>
<strong>for...in could be better</strong>
<p>if index is not maintined properly for in could be better.</p>
<pre><code>
var myArr = [];
myArr[5] = 5;

for(var i in myArr){
  //iterate only once
}

for(var i =0, len = myArr.length; i&lt;len; i++){
  //iterates 5 times  
}
</code></pre>
</div>
<div id="whileLoop">
  <h2>while, do while</h2>
  <pre><code>
var myArr = [1,2,3,4,5,6,7,8,9], 
    len = myArr.length,
    i =0;

while (i++ &lt; len) {
  console.log(myArr[i]);
}

//do while
do {
  someFn(arr[i]);
} while (i--);
  </code></pre>
  <p>Reverse while is the fastest way to loop through an array</p>
  <pre><code>
var l = arr.length;

while(l--) {
  someFn(arr[l]);
}
  </code></pre>
</div>
<div>
  <h2>for of</h2>
  <p>ES 6 only</p>
  <pre><code>
// add ur code here
  </code></pre>
</div>
<div id="summary">
  <h2> Summary</h2>
  <ul>
    <li>Don't measure length in every iteration</li>
    <li>catche object properties, function used in repeating code</li>
    <li>backward for loop is faster than forward</li>
    <li>for-in only when iterating over object</li>
    <li>on array, reverse while is the fastest</li>
  </ul>
</div>


      <hr>

      <footer>
        <p>&copy;thatJSDude <script type="text/javascript">document.write(new Date().getFullYear());</script></p>
      </footer>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../js/jquery-2.0.3.min.js"></script>
    <script src="../../js/jquery.fitvids.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/oAuth/googleOAuth.js"></script>
    <script src="../../js/oAuth/cookieManager.js"></script>
    <script src="../../js/oAuth/managerLogin.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
  </body>
</html>
